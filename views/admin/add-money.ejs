<%- include('../partials/header') %>

<div class="page-container">
    <div class="page-header">
        <h1><i class="fas fa-plus-circle"></i> Add Money to User Account</h1>
        <p><i class="fas fa-info-circle"></i> Credit money to any user's account</p>
    </div>

    <% if (error) { %>
        <div class="alert alert-error">
            <i class="fas fa-exclamation-triangle"></i>
            <%= error %>
        </div>
    <% } %>
    <% if (success) { %>
        <div class="alert alert-success">
            <i class="fas fa-check-circle"></i>
            <%= success %>
        </div>
    <% } %>

    <div class="form-card">
        <form action="/admin/add-money" method="POST">
            <div class="form-group">
                <label for="user_id">
                    <i class="fas fa-user"></i>
                    Select User
                </label>
                <select id="user_id" name="user_id" required class="form-select">
                    <option value="">-- Select User --</option>
                    <% users.forEach(user => { %>
                        <% if (!user.is_admin) { %>
                            <option value="<%= user.id %>">
                                <%= user.full_name %> (<%= user.email %>) - Balance: ₹<%= parseFloat(user.balance).toFixed(2) %>
                            </option>
                        <% } %>
                    <% }); %>
                </select>
            </div>

            <div class="form-group">
                <label for="amount">
                    <i class="fas fa-rupee-sign"></i>
                    Amount (₹)
                </label>
                <input type="number" 
                       id="amount" 
                       name="amount" 
                       required 
                       min="1" 
                       step="0.01" 
                       placeholder="Enter amount to add">
            </div>

            <div class="form-group">
                <label for="description">
                    <i class="fas fa-comment"></i>
                    Description (Optional)
                </label>
                <textarea id="description" 
                          name="description" 
                          rows="3" 
                          placeholder="Add a note about this transaction..."></textarea>
            </div>

            <button type="submit" class="btn btn-primary btn-block">
                <i class="fas fa-plus-circle"></i>
                Add Money
            </button>
            <a href="/admin/dashboard" class="btn btn-secondary btn-block">
                <i class="fas fa-arrow-left"></i>
                Cancel
            </a>
        </form>
    </div>
</div>

<%- include('../partials/footer') %>